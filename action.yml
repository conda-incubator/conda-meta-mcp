name: Conda Meta MCP Setup
description: Set up the conda-meta-mcp for usage with GitHub Copilot coding agent.
author: conda-incubator
branding:
  icon: book-open
  color: blue

runs:
  using: composite
  steps:
    - uses: prefix-dev/setup-pixi@a0af7a228712d6121d37aba47adf55c1332c9c2e # v0.9.4
      env:
        # renovate: datasource=github-releases depName=prefix-dev/pixi
        PIXI_VERSION: v0.64.0
        SETUPTOOLS_SCM_PRETEND_VERSION: 0.0.1
      with:
        manifest-path: ${{ github.action_path }}/pyproject.toml
        pixi-version: ${{ env.PIXI_VERSION }}
    - name: Make available
      shell: bash
      run: |
        mkdir -p "${HOME}/.local/bin"
        ln -s "${{ github.action_path }}/.pixi/envs/default/bin/cmm" "${HOME}/.local/bin/"
    - name: Show help
      shell: bash
      run: |
        cmm run --help
